<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>けいさん</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!--mentalDecreaseAmount = Math.floor(Math.floor((1+Math.abs(mood)/200)*rate/100)*maxMental)-->
<script>
function addNumericInput(numericTarget) {
    numericTarget.addEventListener("input", function (event) {
        if (!/^\d*$/.test(event.target.value)) {
            event.target.value = event.target.value.replace(/[^\d]/g, "");
        }
    });
}
function calc() {
    var maxMental = Number(document.querySelector(".maxMental").value);
    var mood = Number(document.querySelector(".mood").value);
    var rate = Number(document.querySelector(".rate").value);
    
    mentalDecreaseAmount = Math.floor(Math.floor((1+Math.abs(mood)/200)*rate)/100*maxMental);
    mentalDecreaseAmount2 = Math.floor(Math.floor((1+Math.abs(mood)/400)*rate)/100*maxMental);

    document.querySelector(".mentalDecreaseAmountOut").innerText = mentalDecreaseAmount;
    document.querySelector(".fromOut").innerHTML = 1 + mentalDecreaseAmount;
    document.querySelector(".toOut").innerHTML = Math.floor(maxMental / 20) + mentalDecreaseAmount;

    document.querySelector(".mentalDecreaseAmountOut2").innerText = mentalDecreaseAmount2;
    document.querySelector(".fromOut2").innerHTML = 1 + mentalDecreaseAmount2;
    document.querySelector(".toOut2").innerHTML = Math.floor(maxMental / 20) + mentalDecreaseAmount2;
}

window.onload = function() {
    let maxMental = document.querySelector(".maxMental");
    let mood = document.querySelector(".mood");
    let rate = document.querySelector(".rate");
    addNumericInput(maxMental);
    addNumericInput(mood);
    addNumericInput(rate);
    maxMental.addEventListener("input", calc);
    mood.addEventListener("input", calc);
    rate.addEventListener("input", calc);
}

</script>
</head>
<body>
<label for="maxMental">メンタル最大値</label>
<input type="number" name="maxMental" class="maxMental"><br>
<label for="mood">ムード</label>
<input type="number" name="mood" class="mood"><br>
<label for="rate">割合(%)</label>
<input type="number" name="rate" class="rate"><br><br>
ハッピー、メロウ<br>
メンタル減少量 : <span class="mentalDecreaseAmountOut"></span><br>
5%以下範囲 : <span class="fromOut"></span>～<span class="toOut"></span><br><br>
ニュートラル<br>
メンタル減少量 : <span class="mentalDecreaseAmountOut2"></span><br>
5%以下範囲 : <span class="fromOut2"></span>～<span class="toOut2"></span><br><br>
<body>
</html>
